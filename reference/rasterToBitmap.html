<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Converts an image represented by a grDevices raster object into binary
(Amiga) bitmap data."><title>Convert a grDevices raster object into binary bitmap data — rasterToBitmap • AmigaFFH</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert a grDevices raster object into binary bitmap data — rasterToBitmap"><meta property="og:description" content="Converts an image represented by a grDevices raster object into binary
(Amiga) bitmap data."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">AmigaFFH</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../reference/AmigaFFH-package.html">Package documentation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pepijn-devries/AmigaFFH/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Convert a grDevices <code>raster</code> object into binary bitmap data</h1>
      <small class="dont-index">Source: <a href="https://github.com/pepijn-devries/AmigaFFH/blob/HEAD/R/generic_support.r" class="external-link"><code>R/generic_support.r</code></a></small>
      <div class="d-none name"><code>rasterToBitmap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Converts an image represented by a grDevices <code>raster</code> object into binary
(Amiga) bitmap data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rasterToBitmap</span><span class="op">(</span><span class="va">x</span>, depth <span class="op">=</span> <span class="fl">3</span>, interleaved <span class="op">=</span> <span class="cn">T</span>, indexing <span class="op">=</span> <span class="va">index.colours</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A raster object created with <code><a href="https://rdrr.io/r/grDevices/as.raster.html" class="external-link">grDevices::as.raster()</a></code> which
needs to be converted into bitmap data. It is also possible to let <code>x</code> be
a matrix of <code>character</code>s, representing colours.</p></dd>


<dt>depth</dt>
<dd><p>The colour depth of the bitmap image. The image will be composed
of <code>2^depth</code> indexed colours.</p>
<p><code>depth</code> can also be a <code>character</code> string "HAM6" or "HAM8"
representing special Amiga display modes (see details).</p></dd>


<dt>interleaved</dt>
<dd><p>A <code>logical</code> value, indicating whether the bitmap needs to be
interleaved. An interleaved bitmap image stores each consecutive bitmap layer per
horizontal scanline.</p></dd>


<dt>indexing</dt>
<dd><p>A function that accepts two arguments: <code>x</code> (a grDevices
<code>raster</code> object); <code>length.out</code>, a numeric value indicating the
desired size of the palette (i.e., the number of colours). It should return
a matrix with numeric palette indices (ranging from 1 up to the number of
colours in the palette). The result should have an attribute named <code>palette' that contains the colours that correspond with the index numbers. The result should also carry an attribute with the name </code>transparent', with a single numeric value
representing which colour in the palette should be treated as transparent (or
<code>NA</code> when no transparency is required). By default the
function <code><a href="index.colours.html">index.colours()</a></code> is used. You are free to provide
a customised version of this function (see examples).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The bitmap is returned as a <code>vector</code> of <code>logical</code> values.
The <code>logical</code> values reflect the bits for each bitplane. The palette used
for the bitmap is returned as attribute to the <code>vector</code>. There will also be
an attribute called <code>transparent'. This will hold a numeric index corresponding with the colour in the palette that will be treated as transparent. It will be </code>NA` when transparency is not used.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Images represented by grDevices <code>raster</code> objects are virtually true colour (24 bit
colour depth) and an alpha layer (transparency). On the early Amiga's the chipset
(in combination with memory restrictions) only allowed images with indexed
palettes. The colour depth was 12 bit with the original chipset and the number
of colours allowed in a palette also depended on the chipset. This function
will allow you to convert a <code>raster</code> object into binary bitmap data with
an indexed palette. This means that the image is converted in a lossy way
(information will be lost). So don't expect the result to have the same quality as
the original image.</p>
<p>With the <code>depth</code> argument, the raster can also be converted
to special mode bitmap images. One of these modes is the
‘hold and modify’ (HAM). In this mode two of the bitplanes
are reserved as modifier switches. If the this switch equals
zero, the remainder of the bitplanes are used as an index for
colours in a fixed palette. If the switch equals 1, 2 or 3, the
red, green or blue component of the previous is modified, using the
number in the remainder of the bitplanes. So it holds the previous
colour but modifies one of the colour components (hence the term
‘hold and modify’.) Here only the HAM6 and
the HAM8 mode are implemented. HAM6 uses 6 bitplanes and a 12 bit
colour depth, HAM8 uses 8 bitplanes and a 24 bit colour depth.</p>
<p>The HAM mode was a special video modes supported by Amiga hardware.
Normal mode bitmap images with a 6 bit depth would allow for a
palette of 64 (2^6) colours, HAM6 can display 4096 colours with
the same bit depth.</p>
<p>In addition to HAM6 and HAM8, sliced HAM (or SHAM) was another
HAM variant. Using the coprocessor on the Amiga, it was possible
to change the palette at specific scanlines, increasing the number
of available colours even further. The SHAM mode is currently not
supported by this package.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other raster.operations: 
<code><a href="AmigaBitmapFont.html">AmigaBitmapFont</a></code>,
<code><a href="as.raster.html">as.raster.AmigaBasicShape</a>()</code>,
<code><a href="bitmapToRaster.html">bitmapToRaster</a>()</code>,
<code><a href="dither.html">dither</a>()</code>,
<code><a href="index.colours.html">index.colours</a>()</code>,
<code><a href="rasterToAmigaBasicShape.html">rasterToAmigaBasicShape</a>()</code>,
<code><a href="rasterToAmigaBitmapFont.html">rasterToAmigaBitmapFont</a>()</code>,
<code><a href="rasterToHWSprite.html">rasterToHWSprite</a>()</code>,
<code><a href="rasterToIFF.html">rasterToIFF</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Pepijn de Vries</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">## first: Let's make a raster out of the 'volcano' data, which we can use in the example:</span></span></span>
<span class="r-in"><span><span class="va">volcano.raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="as.raster.html">as.raster</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">terrain.colors</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">volcano</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="va">volcano</span> <span class="op">-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">volcano</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">volcano</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## convert the raster into binary (logical) bitmap data:</span></span></span>
<span class="r-in"><span><span class="va">volcano.bm</span> <span class="op">&lt;-</span> <span class="fu">rasterToBitmap</span><span class="op">(</span><span class="va">volcano.raster</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## The palette for the indexed colours of the generated bitmap is returned as</span></span></span>
<span class="r-in"><span><span class="co">## attribute. There is no transparency is the image:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">volcano.bm</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## We can also include a custom function for colour quantisation. Let's include</span></span></span>
<span class="r-in"><span><span class="co">## some dithering:</span></span></span>
<span class="r-in"><span><span class="va">volcano.dither</span> <span class="op">&lt;-</span> <span class="fu">rasterToBitmap</span><span class="op">(</span><span class="va">volcano.raster</span>,</span></span>
<span class="r-in"><span>                                 indexing <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">length.out</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>                                   <span class="fu"><a href="index.colours.html">index.colours</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">length.out</span>,</span></span>
<span class="r-in"><span>                                                 dither <span class="op">=</span> <span class="st">"floyd-steinberg"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                                 <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## You can also use a custom indexing function to force a specified palette,</span></span></span>
<span class="r-in"><span><span class="co">## in this case black and white:</span></span></span>
<span class="r-in"><span><span class="va">volcano.bw</span> <span class="op">&lt;-</span> <span class="fu">rasterToBitmap</span><span class="op">(</span><span class="va">volcano.raster</span>,</span></span>
<span class="r-in"><span>                             indexing <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">length.out</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>                               <span class="fu"><a href="index.colours.html">index.colours</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">length.out</span>,</span></span>
<span class="r-in"><span>                                             palette <span class="op">=</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"white"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                             dither <span class="op">=</span> <span class="st">"floyd-steinberg"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                             <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Make a bitmap using a special display mode (HAM6):</span></span></span>
<span class="r-in"><span><span class="va">volcano.HAM</span> <span class="op">&lt;-</span> <span class="fu">rasterToBitmap</span><span class="op">(</span><span class="va">volcano.raster</span>, <span class="st">"HAM6"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Pepijn de Vries.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

